"""
Represents a dataset
"""
type Dataset {
  id: ID!
  orgId: ID!
  name: String!
  displayName: String
  description: String
  type: DatasetType!
  creatorId: ID!
  isPublic: Boolean!
  createdAt: DateTime!
  updatedAt: DateTime!
  creator: User!
  organization: Organization!
}

input DatasetWhere {
  name: StringFilter
  displayName: StringFilter
  type: DatasetType
  orgId: UUIDFilter
  creatorId: UUIDFilter
  isPublic: BooleanFilter
  createdAt: DateTimeFilter
}

extend type Query {
  """
  List datasets with pagination and filters
  """
  datasets(
    limit: Int = 50
    offset: Int = 0
    where: DatasetWhere
    order_by: [OrderByInput!]
  ): [Dataset!]!

  """
  Get a specific dataset by ID or name
  """
  dataset(id: ID, name: String): Dataset

  """
  Get metadata about a dataset table
  """
  datasetTableMetadata(
    orgId: ID!
    catalogName: String!
    schemaName: String!
    tableName: String!
  ): [TableColumn!]!
}

"""
Table column metadata for dataset tables
"""
type TableColumn {
  name: String!
  type: String!
  nullable: Boolean!
}

extend type Mutation {
  """
  Create a new dataset
  """
  createDataset(input: CreateDatasetInput!): CreateDatasetPayload!

  """
  Update an existing dataset
  """
  updateDataset(input: UpdateDatasetInput!): UpdateDatasetPayload!
}

input CreateDatasetInput {
  orgId: ID!
  name: String!
  displayName: String
  description: String
  type: DatasetType = PYTHON_MODEL
  isPublic: Boolean = false
}

type CreateDatasetPayload {
  success: Boolean!
  dataset: Dataset
  message: String
}

input UpdateDatasetInput {
  id: ID!
  name: String
  displayName: String
  description: String
  isPublic: Boolean
}

type UpdateDatasetPayload {
  success: Boolean!
  dataset: Dataset
  message: String
}

enum DataIngestionFactoryType {
  REST
  GRAPHQL
  ARCHIVE_DIR
}

type DataIngestion {
  id: ID!
  orgId: ID!
  datasetId: ID!
  factoryType: DataIngestionFactoryType!
  config: JSON!
  createdAt: DateTime!
  updatedAt: DateTime!
  modelContext(tableName: String!): ModelContext
  materializations(
    tableName: String!
    first: Int = 50
    after: String
    single: Boolean
    where: JSON
  ): MaterializationConnection!
  previewData(tableName: String!): [JSON!]!
}

type DataIngestionEdge {
  node: DataIngestion!
  cursor: String!
}

type DataIngestionConnection {
  edges: [DataIngestionEdge!]!
  pageInfo: PageInfo!
  totalCount: Int
}

input CreateDataIngestionInput {
  datasetId: ID!
  factoryType: DataIngestionFactoryType!
  config: JSON!
}

extend type Mutation {
  createDataIngestionConfig(input: CreateDataIngestionInput!): DataIngestion!
}

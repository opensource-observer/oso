type StaticModel {
  id: ID!
  orgId: ID!
  organization: Organization!
  dataset: Dataset!
  name: String!
  createdAt: DateTime!
  updatedAt: DateTime!
  modelContext: ModelContext
  runs(first: Int = 50, after: String): RunConnection!
  materializations(
    first: Int = 50
    after: String
    single: Boolean
    where: JSON
  ): MaterializationConnection!
  previewData: PreviewData!
}

type StaticModelEdge {
  node: StaticModel!
  cursor: String!
}

type StaticModelConnection {
  edges: [StaticModelEdge!]!
  pageInfo: PageInfo!
  totalCount: Int
}

extend type Query {
  staticModels(
    first: Int = 50
    after: String
    single: Boolean
    where: JSON
  ): StaticModelConnection!
}

input CreateStaticModelInput {
  """
  The ID of the organization to which the static model belongs.
  """
  orgId: ID!
  """
  The ID of the dataset associated with the static model.
  """
  datasetId: ID!
  """
  The desired name for the static model (must be unique within the organization).
  """
  name: String!
}

type CreateStaticModelPayload {
  success: Boolean!
  staticModel: StaticModel
  message: String
}

input UpdateStaticModelInput {
  staticModelId: ID!
  name: String
}


extend type Mutation {
  createStaticModel(input: CreateStaticModelInput!): CreateStaticModelPayload!
  updateStaticModel(input: UpdateStaticModelInput!): CreateStaticModelPayload!
  deleteStaticModel(id: ID!): SimplePayload!

  """
  Generate a pre-signed upload URL for the static model file. In order to upload
  a static model, first create the static model using the `createStaticModel`
  mutation, then call this mutation to get the upload URL. The file should be
  uploaded to the returned URL using a POST. At this time only CSV files are
  supported.
  """
  createStaticModelUploadUrl(staticModelId: ID!): String!
}

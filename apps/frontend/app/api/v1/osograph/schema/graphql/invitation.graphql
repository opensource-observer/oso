"""
Invitation to join an organization
"""
type Invitation {
  id: ID!
  orgId: ID!
  email: String!
  userRole: MemberRole!
  createdAt: DateTime!
  expiresAt: DateTime!
  acceptedAt: DateTime
  deletedAt: DateTime
  status: InvitationStatus!
}

input InvitationWhere {
  status: InvitationStatus
  email: StringFilter
  orgId: UUIDFilter
  createdAt: DateTimeFilter
}

extend type Query {
  """
  Get a specific invitation by ID
  """
  invitation(id: ID!): Invitation

  """
  List invitations sent to the current user
  """
  myInvitations(
    limit: Int = 50
    offset: Int = 0
    where: InvitationWhere
    order_by: [OrderByInput!]
  ): [Invitation!]!
}

extend type Mutation {
  """
  Create and send an invitation to join an organization
  """
  createInvitation(input: CreateInvitationInput!): CreateInvitationPayload!

  """
  Accept an invitation
  """
  acceptInvitation(input: AcceptInvitationInput!): AcceptInvitationPayload!

  """
  Revoke an invitation
  """
  revokeInvitation(input: RevokeInvitationInput!): RevokeInvitationPayload!
}

input CreateInvitationInput {
  orgId: ID!
  email: String!
  role: MemberRole! = member
}

type CreateInvitationPayload {
  success: Boolean!
  invitation: Invitation
  message: String
}

input AcceptInvitationInput {
  invitationId: ID!
}

type AcceptInvitationPayload {
  success: Boolean!
  member: OrganizationMember
  message: String
}

input RevokeInvitationInput {
  invitationId: ID!
}

type RevokeInvitationPayload {
  success: Boolean!
  message: String
}
